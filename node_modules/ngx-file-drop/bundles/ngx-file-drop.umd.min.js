!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("ngx-file-drop",["exports","@angular/core","rxjs"],t):t(e["ngx-file-drop"]={},e.ng.core,e.rxjs)}(this,function(e,n,a){"use strict";var p=function i(e,t){this.relativePath=e,this.fileEntry=t},l=function o(e){this.files=e},t=function(){function e(e,t){var r=this;this.zone=e,this.renderer=t,this.headertext="",this.customstyle=null,this.disableIf=!1,this.onFileDrop=new n.EventEmitter,this.onFileOver=new n.EventEmitter,this.onFileLeave=new n.EventEmitter,this.stack=[],this.files=[],this.dragoverflag=!1,this.globalDisable=!1,this.numOfActiveReadEntries=0,this.customstyle||(this.customstyle="drop-zone"),this.globalStart=this.renderer.listen("document","dragstart",function(e){r.globalDisable=!0}),this.globalEnd=this.renderer.listen("document","dragend",function(e){r.globalDisable=!1})}return e.prototype.onDragOver=function(e){this.globalDisable||this.disableIf||(this.dragoverflag||(this.dragoverflag=!0,this.onFileOver.emit(e)),this.preventAndStop(e))},e.prototype.onDragLeave=function(e){this.globalDisable||this.disableIf||(this.dragoverflag&&(this.dragoverflag=!1,this.onFileLeave.emit(e)),this.preventAndStop(e))},e.prototype.dropFiles=function(o){var t=this;if(!this.globalDisable&&!this.disableIf){var e;this.dragoverflag=!1,o.dataTransfer.dropEffect="copy",e=o.dataTransfer.items?o.dataTransfer.items.length:o.dataTransfer.files.length;for(var r=function(e){var t=void 0;if(o.dataTransfer.items?o.dataTransfer.items[e].webkitGetAsEntry&&(t=o.dataTransfer.items[e].webkitGetAsEntry()):o.dataTransfer.files[e].webkitGetAsEntry&&(t=o.dataTransfer.files[e].webkitGetAsEntry()),t)if(t.isFile){i=new p(t.name,t);s.addToQueue(i)}else t.isDirectory&&s.traverseFileTree(t,t.name);else{var r=o.dataTransfer.files[e];if(r){var n={name:r.name,isDirectory:!1,isFile:!0,file:function(e){e(r)}},i=new p(n.name,n);s.addToQueue(i)}}},s=this,n=0;n<e;n++)r(n);this.preventAndStop(o);var i=a.timer(200,200);this.subscription=i.subscribe(function(e){0<t.files.length&&0===t.numOfActiveReadEntries&&(t.onFileDrop.emit(new l(t.files)),t.files=[])})}},e.prototype.traverseFileTree=function(i,o){var e=this;if(i.isFile){var t=new p(o,i);this.files.push(t),this.zone.run(function(){e.popToStack()})}else{this.pushToStack(o),o+="/";var r=i.createReader(),s=[],a=this,l=function(){a.numOfActiveReadEntries++,r.readEntries(function(e){if(e.length)s=s.concat(e),l();else{if(0===s.length){var t=new p(o,i);a.zone.run(function(){a.addToQueue(t)})}else for(var r=function(e){a.zone.run(function(){a.traverseFileTree(s[e],o+s[e].name)})},n=0;n<s.length;n++)r(n);a.zone.run(function(){a.popToStack()})}a.numOfActiveReadEntries--})};l()}},e.prototype.addToQueue=function(e){this.files.push(e)},e.prototype.pushToStack=function(e){this.stack.push(e)},e.prototype.popToStack=function(){this.stack.pop()},e.prototype.clearQueue=function(){this.files=[]},e.prototype.preventAndStop=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe(),this.globalStart(),this.globalEnd()},e.decorators=[{type:n.Component,args:[{selector:"file-drop",template:'<div id="dropZone"  [className]="customstyle" [class.over]="dragoverflag"\r\n    (drop)="dropFiles($event)"\r\n    (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)">\r\n    <div class="content">\r\n        <ng-content></ng-content>\r\n        {{headertext}}\r\n    </div>\r\n</div>\r\n',styles:[".drop-zone{margin:auto;height:100px;border:2px dotted #0782d0;border-radius:30px}.content{color:#0782d0;height:100px;display:flex;justify-content:center;align-items:center}.over{background-color:rgba(147,147,147,.5)}"]}]}],e.ctorParameters=function(){return[{type:n.NgZone},{type:n.Renderer}]},e.propDecorators={headertext:[{type:n.Input}],customstyle:[{type:n.Input}],disableIf:[{type:n.Input}],onFileDrop:[{type:n.Output}],onFileOver:[{type:n.Output}],onFileLeave:[{type:n.Output}]},e}(),r=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{declarations:[t],exports:[t],imports:[],providers:[],bootstrap:[t]}]}],e}();e.FileComponent=t,e.FileDropModule=r,e.UploadFile=p,e.UploadEvent=l,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-file-drop.umd.min.js.map